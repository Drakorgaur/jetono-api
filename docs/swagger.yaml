definitions:
  nats.AckPolicy:
    enum:
    - 0
    - 1
    - 2
    type: integer
    x-enum-varnames:
    - AckNonePolicy
    - AckAllPolicy
    - AckExplicitPolicy
  nats.ConsumerConfig:
    properties:
      ack_policy:
        $ref: '#/definitions/nats.AckPolicy'
      ack_wait:
        $ref: '#/definitions/time.Duration'
      backoff:
        items:
          $ref: '#/definitions/time.Duration'
        type: array
      deliver_group:
        type: string
      deliver_policy:
        $ref: '#/definitions/nats.DeliverPolicy'
      deliver_subject:
        description: Push based consumers.
        type: string
      description:
        type: string
      durable_name:
        type: string
      filter_subject:
        type: string
      flow_control:
        type: boolean
      headers_only:
        type: boolean
      idle_heartbeat:
        $ref: '#/definitions/time.Duration'
      inactive_threshold:
        allOf:
        - $ref: '#/definitions/time.Duration'
        description: Ephemeral inactivity threshold.
      max_ack_pending:
        type: integer
      max_batch:
        description: Pull based options.
        type: integer
      max_deliver:
        type: integer
      max_expires:
        $ref: '#/definitions/time.Duration'
      max_waiting:
        type: integer
      mem_storage:
        description: Force memory storage.
        type: boolean
      num_replicas:
        description: Generally inherited by parent stream and other markers, now can
          be configured directly.
        type: integer
      opt_start_seq:
        type: integer
      opt_start_time:
        type: string
      rate_limit_bps:
        description: Bits per sec
        type: integer
      replay_policy:
        $ref: '#/definitions/nats.ReplayPolicy'
      sample_freq:
        type: string
    type: object
  nats.DeliverPolicy:
    enum:
    - 0
    - 1
    - 2
    - 3
    - 4
    - 5
    type: integer
    x-enum-varnames:
    - DeliverAllPolicy
    - DeliverLastPolicy
    - DeliverNewPolicy
    - DeliverByStartSequencePolicy
    - DeliverByStartTimePolicy
    - DeliverLastPerSubjectPolicy
  nats.DiscardPolicy:
    enum:
    - 0
    - 1
    type: integer
    x-enum-varnames:
    - DiscardOld
    - DiscardNew
  nats.ExternalStream:
    properties:
      api:
        type: string
      deliver:
        type: string
    type: object
  nats.Placement:
    properties:
      cluster:
        type: string
      tags:
        items:
          type: string
        type: array
    type: object
  nats.ReplayPolicy:
    enum:
    - 0
    - 1
    type: integer
    x-enum-varnames:
    - ReplayInstantPolicy
    - ReplayOriginalPolicy
  nats.RetentionPolicy:
    enum:
    - 0
    - 1
    - 2
    type: integer
    x-enum-varnames:
    - LimitsPolicy
    - InterestPolicy
    - WorkQueuePolicy
  nats.StorageType:
    enum:
    - 0
    - 1
    type: integer
    x-enum-varnames:
    - FileStorage
    - MemoryStorage
  nats.StreamConfig:
    properties:
      allow_rollup_hdrs:
        type: boolean
      deny_delete:
        type: boolean
      deny_purge:
        type: boolean
      description:
        type: string
      discard:
        $ref: '#/definitions/nats.DiscardPolicy'
      duplicate_window:
        $ref: '#/definitions/time.Duration'
      max_age:
        $ref: '#/definitions/time.Duration'
      max_bytes:
        type: integer
      max_consumers:
        type: integer
      max_msg_size:
        type: integer
      max_msgs:
        type: integer
      max_msgs_per_subject:
        type: integer
      mirror:
        $ref: '#/definitions/nats.StreamSource'
      name:
        type: string
      no_ack:
        type: boolean
      num_replicas:
        type: integer
      placement:
        $ref: '#/definitions/nats.Placement'
      republish:
        allOf:
        - $ref: '#/definitions/nats.SubjectMapping'
        description: Allow republish of the message after being sequenced and stored.
      retention:
        $ref: '#/definitions/nats.RetentionPolicy'
      sealed:
        type: boolean
      sources:
        items:
          $ref: '#/definitions/nats.StreamSource'
        type: array
      storage:
        $ref: '#/definitions/nats.StorageType'
      subjects:
        items:
          type: string
        type: array
      template_owner:
        type: string
    type: object
  nats.StreamSource:
    properties:
      external:
        $ref: '#/definitions/nats.ExternalStream'
      filter_subject:
        type: string
      name:
        type: string
      opt_start_seq:
        type: integer
      opt_start_time:
        type: string
    type: object
  nats.SubjectMapping:
    properties:
      dest:
        type: string
      src:
        type: string
    type: object
  src.AccountDescription:
    properties:
      iat:
        type: integer
      iss:
        type: string
      jti:
        type: string
      name:
        type: string
      nats:
        properties:
          authorization:
            properties:
              auth_users: {}
            type: object
          default_permissions:
            properties:
              pub:
                additionalProperties: true
                type: object
              sub:
                additionalProperties: true
                type: object
            type: object
          limits:
            properties:
              conn:
                type: integer
              data:
                type: integer
              exports:
                type: integer
              imports:
                type: integer
              leaf:
                type: integer
              payload:
                type: integer
              subs:
                type: integer
              wildcards:
                type: boolean
            type: object
          type:
            type: string
          version:
            type: integer
        type: object
      sub:
        type: string
    type: object
  src.NATSResourceForm:
    properties:
      account:
        type: string
      operator:
        type: string
      server_url:
        type: string
      stream_name:
        type: string
      user:
        type: string
    type: object
  src.OperatorDescription:
    properties:
      iat:
        type: integer
      iss:
        type: string
      jti:
        type: string
      name:
        type: string
      nats:
        properties:
          type:
            type: string
          version:
            type: integer
        type: object
      sub:
        type: string
    type: object
  src.SecretInfo:
    properties:
      name:
        type: string
      namespace:
        type: string
    type: object
  src.SecretResponse:
    properties:
      message:
        type: string
      secret:
        $ref: '#/definitions/src.SecretInfo'
    type: object
  src.SimpleJSONResponse:
    properties:
      message:
        type: string
      status:
        type: string
    type: object
  src.UserDescription:
    properties:
      iat:
        type: integer
      iss:
        type: string
      jti:
        type: string
      name:
        type: string
      nats:
        properties:
          data:
            type: integer
          payload:
            type: integer
          pub:
            additionalProperties: true
            type: object
          sub:
            additionalProperties: true
            type: object
          subs:
            type: integer
          type:
            type: string
          version:
            type: integer
        type: object
      sub:
        type: string
    type: object
  src.addAccountForm:
    properties:
      allow_pub:
        type: string
      allow_pub_response:
        type: string
      allow_pubsub:
        type: string
      allow_sub:
        type: string
      deny_pub:
        type: string
      deny_pubsub:
        type: string
      deny_sub:
        type: string
      expiry:
        type: string
      name:
        type: string
      public_key:
        type: string
      response_ttl:
        type: string
      start:
        type: string
    type: object
  src.addNatsConsumerForm:
    properties:
      config:
        $ref: '#/definitions/nats.ConsumerConfig'
      meta:
        $ref: '#/definitions/src.NATSResourceForm'
    type: object
  src.addNatsStreamForm:
    properties:
      config:
        $ref: '#/definitions/nats.StreamConfig'
      meta:
        $ref: '#/definitions/src.NATSResourceForm'
    type: object
  src.addOperatorForm:
    properties:
      expiry:
        type: string
      force:
        type: boolean
      generate_signing_key:
        type: boolean
      name:
        type: string
      start:
        type: string
      sys:
        type: boolean
    required:
    - name
    type: object
  src.addUserForm:
    properties:
      account:
        type: string
      name:
        type: string
    type: object
  src.createSecretForm:
    properties:
      account:
        type: string
      namespace:
        type: string
      operator:
        type: string
      secret_name:
        type: string
      user:
        type: string
    type: object
  src.postPushForm:
    properties:
      account:
        type: string
      operator:
        type: string
      server_list:
        type: string
    type: object
  src.storeConfigForm:
    properties:
      name:
        type: string
      operator:
        type: string
    type: object
  src.updateAccountForm:
    properties:
      conns:
        type: string
      data:
        type: string
      description:
        type: string
      disallow_bearer:
        type: boolean
      exports:
        type: string
      imports:
        type: string
      info_url:
        type: string
      js_consumer:
        type: string
      js_disk_storage:
        type: string
      js_max_ack_pending:
        type: string
      js_max_bytes_required:
        type: string
      js_max_disk_stream:
        type: string
      js_max_mem_stream:
        type: string
      js_mem_storage:
        type: string
      js_streams:
        type: string
      js_tier:
        type: string
      leaf_conns:
        type: string
      payload:
        type: string
      rm_js_tier:
        type: string
      rm_sk:
        type: string
      rm_tag:
        type: string
      subscriptions:
        type: string
      tag:
        type: string
      wildcard_exports:
        type: boolean
    type: object
  src.updateOperatorForm:
    properties:
      account_jwt_server_url:
        type: string
      require_signing_keys:
        type: boolean
      rm_account_jwt_server_url:
        type: string
      rm_service_url:
        type: string
      rm_tag:
        type: string
      service_url:
        type: string
      system_account:
        type: string
      tag:
        type: string
    type: object
  src.updateUserForm:
    properties:
      allow_pub:
        type: string
      allow_pub_response:
        type: string
      allow_pubsub:
        type: string
      allow_sub:
        type: string
      bearer:
        type: boolean
      conn_type:
        type: string
      data:
        type: string
      deny_pub:
        type: string
      deny_pubsub:
        type: string
      deny_sub:
        type: string
      expiry:
        type: string
      locale:
        type: string
      payload:
        type: string
      response_ttl:
        type: string
      rm:
        type: string
      rm_conn_type:
        type: string
      rm_response_perms:
        type: string
      rm_source_network:
        type: string
      rm_tag:
        type: string
      rm_time:
        type: string
      source_network:
        type: string
      start:
        type: string
      subs:
        type: string
      tag:
        type: string
      time:
        type: string
    type: object
  storage.AccountServerMap:
    properties:
      account:
        type: string
      operator:
        type: string
      server:
        type: string
    type: object
  time.Duration:
    enum:
    - -9223372036854775808
    - 9223372036854775807
    - 1
    - 1000
    - 1000000
    - 1000000000
    - 60000000000
    - 3600000000000
    type: integer
    x-enum-varnames:
    - minDuration
    - maxDuration
    - Nanosecond
    - Microsecond
    - Millisecond
    - Second
    - Minute
    - Hour
info:
  contact: {}
paths:
  /bind:
    get:
      description: Returns json object with context
      parameters:
      - description: Account name
        in: query
        name: account
        required: true
        type: string
      - description: Operator name
        in: query
        name: operator
        required: true
        type: string
      responses:
        "200":
          description: Operator description
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            type: string
      summary: read context bound to account
      tags:
      - Account
    post:
      description: Returns json with confirmation
      parameters:
      - description: json
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/storage.AccountServerMap'
      responses:
        "200":
          description: Operator description
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            type: string
      summary: Bind context to account
      tags:
      - Account
  /creds/operator/{operator}/account/{account}/user/{user}:
    get:
      parameters:
      - description: Username
        in: path
        name: user
        required: true
        type: string
      - description: Account name
        in: path
        name: account
        required: true
        type: string
      - description: Operator name
        in: path
        name: operator
        required: true
        type: string
      responses:
        "200":
          description: Operators list
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: User was not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            type: string
      summary: Generate user credentials
      tags:
      - User
  /generate/config:
    get:
      parameters:
      - description: Operator name
        in: query
        name: operator
        required: true
        type: string
      responses:
        "200":
          description: text/plain config file
          schema:
            type: string
        "500":
          description: Internal error
          schema:
            type: string
      summary: Sends configuration for nats server with resolver as this operator
      tags:
      - Generate
    post:
      parameters:
      - description: json body
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.storeConfigForm'
      responses:
        "200":
          description: 200 ok
          schema:
            $ref: '#/definitions/src.SimpleJSONResponse'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Stores configuration for nats server with resolver as this operator
        in kubernetes secret
      tags:
      - Generate
  /nats/consumer:
    post:
      parameters:
      - description: json
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.addNatsConsumerForm'
      responses:
        "500":
          description: Internal error
          schema:
            type: string
      summary: Gets consumers for user
      tags:
      - NATS
  /nats/consumers:
    get:
      parameters:
      - description: operator name
        in: query
        name: operator
        required: true
        type: string
      - description: account name
        in: query
        name: account
        required: true
        type: string
      - description: username
        in: query
        name: user
        required: true
        type: string
      - description: server url
        in: query
        name: server_url
        type: string
      - description: stream name
        in: query
        name: stream_name
        type: string
      responses:
        "500":
          description: Internal error
          schema:
            type: string
      summary: Gets consumers for user
      tags:
      - NATS
  /nats/stream:
    post:
      parameters:
      - description: json
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.addNatsStreamForm'
      responses:
        "500":
          description: Internal error
          schema:
            type: string
      summary: Add stream for user
      tags:
      - NATS
  /nats/streams:
    get:
      parameters:
      - description: operator name
        in: query
        name: operator
        required: true
        type: string
      - description: account name
        in: query
        name: account
        required: true
        type: string
      - description: username
        in: query
        name: user
        required: true
        type: string
      - description: server url
        in: query
        name: server_url
        type: string
      responses:
        "500":
          description: Internal error
          schema:
            type: string
      summary: Gets streams for user
      tags:
      - NATS
  /operator:
    post:
      description: Add an operator to the store
      parameters:
      - description: request body
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.addOperatorForm'
      responses:
        "200":
          description: Operator added
          schema:
            $ref: '#/definitions/src.SimpleJSONResponse'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/src.SimpleJSONResponse'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Add an operator
      tags:
      - Operator
  /operator/{name}:
    get:
      description: Returns json object with operator description
      parameters:
      - description: Operator name
        in: path
        name: name
        required: true
        type: string
      responses:
        "200":
          description: Operator description
          schema:
            $ref: '#/definitions/src.OperatorDescription'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Describes an operator
      tags:
      - Operator
    patch:
      description: Updates an operator and returns json with status ok if successful
      parameters:
      - description: Operator name
        in: path
        name: name
        required: true
        type: string
      - description: request body
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.updateOperatorForm'
      responses:
        "200":
          description: Status ok
          schema:
            $ref: '#/definitions/src.SimpleJSONResponse'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Updates an operator
      tags:
      - Operator
  /operator/{operator}/account:
    post:
      description: Add an account with given operator to the store
      parameters:
      - description: Operator name
        in: path
        name: operator
        required: true
        type: string
      - description: Account data in json format
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.addAccountForm'
      responses:
        "200":
          description: Account added
          schema:
            $ref: '#/definitions/src.SimpleJSONResponse'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/src.SimpleJSONResponse'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Add an account
      tags:
      - Account
  /operator/{operator}/account/{account}/user:
    post:
      description: Add user with given operator and account to the store
      parameters:
      - description: json
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.addUserForm'
      - description: Account name
        in: path
        name: account
        required: true
        type: string
      - description: Operator name
        in: path
        name: operator
        required: true
        type: string
      responses:
        "200":
          description: User added
          schema:
            $ref: '#/definitions/src.SimpleJSONResponse'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/src.SimpleJSONResponse'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Add user
      tags:
      - User
  /operator/{operator}/account/{account}/user/{name}:
    delete:
      description: Revokes a user
      parameters:
      - description: Username
        in: path
        name: name
        required: true
        type: string
      - description: Account name
        in: path
        name: account
        required: true
        type: string
      - description: Operator name
        in: path
        name: operator
        required: true
        type: string
      responses:
        "200":
          description: Operator description
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            type: string
      summary: Revokes a user
      tags:
      - User
    get:
      description: Returns json object with user description
      parameters:
      - description: Username
        in: path
        name: name
        required: true
        type: string
      - description: Account name
        in: path
        name: account
        required: true
        type: string
      - description: Operator name
        in: path
        name: operator
        required: true
        type: string
      responses:
        "200":
          description: Operator description
          schema:
            $ref: '#/definitions/src.UserDescription'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Describes user
      tags:
      - User
    patch:
      description: Updates an user and returns json with status ok if successful
      parameters:
      - description: Username
        in: path
        name: name
        required: true
        type: string
      - description: Account name
        in: path
        name: account
        required: true
        type: string
      - description: Operator name
        in: path
        name: operator
        required: true
        type: string
      - description: add tags for user - comma separated list or option can be specified
          multiple times
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.updateUserForm'
      responses:
        "200":
          description: Status ok
          schema:
            $ref: '#/definitions/src.SimpleJSONResponse'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Updates an user
      tags:
      - User
  /operator/{operator}/account/{account}/users:
    get:
      description: Returns json list of existing users for given operator's account
      parameters:
      - description: Account name
        in: path
        name: account
        required: true
        type: string
      - description: Operator name
        in: path
        name: operator
        required: true
        type: string
      responses:
        "200":
          description: List of users for given operator's account
          schema:
            items:
              type: string
            type: array
        "500":
          description: Internal error
          schema:
            type: string
      summary: List users
      tags:
      - User
  /operator/{operator}/account/{name}:
    get:
      description: Returns json object with account description
      parameters:
      - description: Account name
        in: path
        name: name
        required: true
        type: string
      - description: Operator name
        in: path
        name: operator
        required: true
        type: string
      responses:
        "200":
          description: Operator description
          schema:
            $ref: '#/definitions/src.AccountDescription'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Describes an account
      tags:
      - Account
    patch:
      description: Updates an account and returns json with status ok if successful
      parameters:
      - description: Account name
        in: path
        name: name
        required: true
        type: string
      - description: Operator name
        in: path
        name: operator
        required: true
        type: string
      - description: Account data in json format
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.updateAccountForm'
      responses:
        "200":
          description: Status ok
          schema:
            $ref: '#/definitions/src.SimpleJSONResponse'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Updates an account
      tags:
      - Account
  /operator/{operator}/accounts:
    get:
      description: Returns json list of existing accounts for given operator
      parameters:
      - description: Operator name
        in: path
        name: operator
        required: true
        type: string
      responses:
        "200":
          description: Operator's accounts list
          schema:
            items:
              type: string
            type: array
        "500":
          description: Internal error
          schema:
            type: string
      summary: List accounts
      tags:
      - Account
  /operators:
    get:
      description: Returns json list of existing operators
      responses:
        "200":
          description: Operators list
          schema:
            items:
              type: string
            type: array
        "500":
          description: Internal error
          schema:
            type: string
      summary: List operators
      tags:
      - Operator
  /pushAccount:
    post:
      description: Returns json with confirmation
      parameters:
      - description: json
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.postPushForm'
      responses:
        "200":
          description: Acknowledgement
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal error
          schema:
            type: string
      summary: Push account to server
      tags:
      - Account
  /secret:
    post:
      parameters:
      - description: json body
        in: body
        name: json
        required: true
        schema:
          $ref: '#/definitions/src.createSecretForm'
      responses:
        "200":
          description: 200 ok
          schema:
            $ref: '#/definitions/src.SecretResponse'
        "500":
          description: Internal error
          schema:
            type: string
      summary: Creates secret with credentials
      tags:
      - Secret
swagger: "2.0"
